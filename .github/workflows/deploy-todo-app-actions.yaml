# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deployt todo-app to firebase hosting
on:
  workflow_run:
    workflows: [todo-app-e2e]
    types: [completed]
jobs:
  build_and_deploy:
    runs-on: ubuntu-22.04
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
    - name: Build todo-app
      run: npm ci && npm run build
    - uses: FirebaseExtended/action-hosting-deploy@v0
      with:
        repoToken: '${{ secrets.GITHUB_TOKEN }}'
        firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_TODO_APP_F06DA }}'
        channelId: live
        projectId: todo-app-f06da
